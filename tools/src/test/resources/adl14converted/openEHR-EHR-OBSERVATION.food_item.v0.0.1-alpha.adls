archetype (adl_version=2.0.6; rm_release=1.1.0; generated; uid=c2ed9808-3ddf-4154-bca9-668dabdb89cf; build_uid=e43d119c-2687-4d8a-85ea-80269962e86f)
    openEHR-EHR-OBSERVATION.food_item.v0.0.1-alpha

language
    original_language = <[ISO_639-1::en]>

description
    original_author = <
        ["name"] = <"Silje Ljosland Bakke, Heather Leslie">
        ["organisation"] = <"Nasjonal IKT, Norway; Ocean Health Systems, Australia">
        ["email"] = <"silje.ljosland.bakke@nasjonalikt.no, heather.leslie@oceanhealthsystems.com">
        ["date"] = <"2017-06-29">
    >
    original_namespace = <"org.openehr">
    original_publisher = <"openEHR Foundation">
    lifecycle_state = <"in_development">
    custodian_namespace = <"org.openehr">
    custodian_organisation = <"openEHR Foundation">
    licence = <"This work is licensed under the Creative Commons Attribution-ShareAlike 3.0 License. To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/3.0/.">
    other_details = <
        ["current_contact"] = <"Heather Leslie, Ocean Health Systems<heather.leslie@oceanhealthsystems.com>">
        ["MD5-CAM-1.0.1"] = <"3B3DAE542C2D25B7A481A834E147A252">
    >
    details = <
        ["en"] = <
            language = <[ISO_639-1::en]>
            purpose = <"To record information about a single food item consumed by an individual.">
            keywords = <"nutrition", "diet", "diary">
            use = <"Use to record information about a single food item consumed by an individual.
    
    Multiple instances of this archetype could be used to record each food consumed by an individual within a specified timeframe as part of a food diary.
    
    This archetype may be extended using specific CLUSTER archetypes that represent further detail about the food item, such as CLUSTER.macronutrient or CLUSTER.micronutrient and other related archetypes.">
            misuse = <"Not to be used to record planned consumption of a food item.">
            copyright = <"Â© openEHR Foundation">
        >
    >

definition
    OBSERVATION[id1] matches {    -- Food item
        data matches {
            HISTORY[id2] matches {
                events cardinality matches {1..*; unordered} matches {
                    EVENT[id3] matches {    -- Any event
                        data matches {
                            ITEM_TREE[id4] matches {
                                items cardinality matches {0..*; unordered} matches {
                                    ELEMENT[id5] occurrences matches {0..1} matches {    -- Food item name
                                        value matches {
                                            DV_TEXT[id9005] 
                                        }
                                    }
                                    CLUSTER[id6] occurrences matches {0..1} matches {    -- Amount
                                        items cardinality matches {1..*; unordered} matches {
                                            ELEMENT[id7] occurrences matches {0..1} matches {    -- Mass
                                                value matches {
                                                    DV_QUANTITY[id9006] matches {
                                                        property matches {[at9000]}    -- Mass
                                                        [magnitude, units] matches {
                                                            [{|>=0.0|}, {"g"}],
                                                            [{|>=0.0|}, {"kg"}],
                                                            [{|>=0.0|}, {"[oz_av]"}],
                                                            [{|>=0.0|}, {"[lb_av]"}]
                                                        }
                                                    }
                                                }
                                            }
                                            ELEMENT[id8] occurrences matches {0..1} matches {    -- Volume
                                                value matches {
                                                    DV_QUANTITY[id9007] matches {
                                                        property matches {[at9001]}    -- Volume
                                                        [magnitude, units] matches {
                                                            [{|>=0.0|}, {"ml"}],
                                                            [{|>=0.0|}, {"cl"}],
                                                            [{|>=0.0|}, {"dl"}],
                                                            [{|>=0.0|}, {"l"}],
                                                            [{|>=0.0|}, {"[foz_us]"}],
                                                            [{|>=0.0|}, {"[pt_us]"}],
                                                            [{|>=0.0|}, {"[tsp_m]"}],
                                                            [{|>=0.0|}, {"[tsp_us]"}],
                                                            [{|>=0.0|}, {"[tbs_m]"}],
                                                            [{|>=0.0|}, {"[tbs_us]"}],
                                                            [{|>=0.0|}, {"[cup_m]"}],
                                                            [{|>=0.0|}, {"[cup_us]"}]
                                                        }
                                                    }
                                                }
                                            }
                                            ELEMENT[id9] occurrences matches {0..1} matches {    -- Serving
                                                value matches {
                                                    DV_QUANTITY[id9008] matches {
                                                        property matches {[at9002]}    -- Qualified real
                                                        magnitude matches {|>=0.0|}
                                                        units matches {"1"}
                                                        precision matches {1}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    ELEMENT[id10] occurrences matches {0..1} matches {    -- Glycaemic load
                                        value matches {
                                            DV_COUNT[id9009] matches {
                                                magnitude matches {|>=0|}
                                            }
                                        }
                                    }
                                    allow_archetype CLUSTER[id11] matches {     -- Nutrients
                                        include
                                            archetype_id/value matches {/openEHR-EHR-CLUSTER\.macronutrients(-[a-zA-Z0-9_]+)*\.v0\..*|openEHR-EHR-CLUSTER\.micronutrients(-[a-zA-Z0-9_]+)*\.v0\..*/}
                                    }
                                    ELEMENT[id12] occurrences matches {0..1} matches {    -- Comment
                                        value matches {
                                            DV_TEXT[id9010] 
                                        }
                                    }
                                }
                            }
                        }
                    }
                    INTERVAL_EVENT[id24] matches {    -- One day
                        width matches {
                            DV_DURATION[id9011] matches {
                                value matches {PT24H; PT24H}
                            }
                        }
                        data matches {
                            use_node ITEM_TREE[id9012] /data[id2]/events[id3]/data[id4]
                        }
                    }
                    INTERVAL_EVENT[id25] matches {    -- One week
                        width matches {
                            DV_DURATION[id9013] matches {
                                value matches {P7D; P7D}
                            }
                        }
                        data matches {
                            use_node ITEM_TREE[id9014] /data[id2]/events[id3]/data[id4]
                        }
                    }
                }
            }
        }
        protocol matches {
            ITEM_TREE[id13] matches {
                items cardinality matches {0..*; unordered} matches {
                    allow_archetype CLUSTER[id14] matches {     -- Extension
                        include
                            archetype_id/value matches {/.*/}
                    }
                    ELEMENT[id15] occurrences matches {0..1} matches {    -- Serving size (mass)
                        value matches {
                            DV_QUANTITY[id9015] matches {
                                property matches {[at9000]}    -- Mass
                                [magnitude, units] matches {
                                    [{|>=0.0|}, {"g"}],
                                    [{|>=0.0|}, {"kg"}],
                                    [{|>=0.0|}, {"[oz_av]"}],
                                    [{|>=0.0|}, {"[lb_av]"}]
                                }
                            }
                        }
                    }
                    ELEMENT[id16] occurrences matches {0..1} matches {    -- Serving size (volume)
                        value matches {
                            DV_QUANTITY[id9016] matches {
                                property matches {[at9001]}    -- Volume
                                [magnitude, units] matches {
                                    [{|>=0.0|}, {"ml"}],
                                    [{|>=0.0|}, {"cl"}],
                                    [{|>=0.0|}, {"dl"}],
                                    [{|>=0.0|}, {"l"}],
                                    [{|>=0.0|}, {"[foz_us]"}],
                                    [{|>=0.0|}, {"[pt_us]"}],
                                    [{|>=0.0|}, {"[tsp_m]"}],
                                    [{|>=0.0|}, {"[tsp_us]"}],
                                    [{|>=0.0|}, {"[tbs_m]"}],
                                    [{|>=0.0|}, {"[tbs_us]"}],
                                    [{|>=0.0|}, {"[cup_m]"}],
                                    [{|>=0.0|}, {"[cup_us]"}]
                                }
                            }
                        }
                    }
                    ELEMENT[id17] occurrences matches {0..1} matches {    -- Method
                        value matches {
                            DV_CODED_TEXT[id9017] matches {
                                defining_code matches {[ac9003]}    -- Method (synthesised)
                            }
                        }
                    }
                    ELEMENT[id23] occurrences matches {0..1} matches {    -- Accuracy
                        value matches {
                            DV_CODED_TEXT[id9018] matches {
                                defining_code matches {[ac9004]}    -- Accuracy (synthesised)
                            }
                        }
                    }
                    allow_archetype CLUSTER[id18] matches {     -- Device
                        include
                            archetype_id/value matches {/.*/}
                    }
                }
            }
        }
    }

terminology
    term_definitions = <
        ["en"] = <
            ["at9000"] = <
                text = <"Mass">
                description = <"Mass">
            >
            ["at9001"] = <
                text = <"Volume">
                description = <"Volume">
            >
            ["at9002"] = <
                text = <"Qualified real">
                description = <"Qualified real">
            >
            ["ac9003"] = <
                text = <"Method (synthesised)">
                description = <"The method used to measure the amount of food. (synthesised)">
            >
            ["ac9004"] = <
                text = <"Accuracy (synthesised)">
                description = <"The qualitative precision of the amount of the food item. (synthesised)">
            >
            ["id25"] = <
                text = <"One week">
                description = <"One week interval event, which may be further defined in a template or at run-time, for example: specifically named as 'Last week'.">
            >
            ["id24"] = <
                text = <"One day">
                description = <"One day interval event, which may be further defined in a template or at run-time, for example: specifically named as 'Friday' or 'Saturday'.">
            >
            ["id23"] = <
                text = <"Accuracy">
                description = <"The qualitative precision of the amount of the food item.">
            >
            ["at21"] = <
                text = <"Observation">
                description = <"The amount of food was recorded at the time of consumption.">
            >
            ["at20"] = <
                text = <"Memory">
                description = <"The amount of food was recorded from memory.">
            >
            ["at19"] = <
                text = <"Measured">
                description = <"Actual measurement of the amount of the food item.">
            >
            ["at18"] = <
                text = <"Estimated">
                description = <"An approximation of the amount of the food item.">
            >
            ["id18"] = <
                text = <"Device">
                description = <"Details about the device used to measure or record the amount of the food item.">
            >
            ["id17"] = <
                text = <"Method">
                description = <"The method used to measure the amount of food.">
            >
            ["id16"] = <
                text = <"Serving size (volume)">
                description = <"Definition of the size of a single serving of the food item, by volume.">
            >
            ["id15"] = <
                text = <"Serving size (mass)">
                description = <"Definition of the size of a single serving of the food item, by mass.">
            >
            ["id14"] = <
                text = <"Extension">
                description = <"Additional information required to capture local content or to align with other reference models/formalisms.">
                comment = <"For example: Local hospital departmental infomation or additional metadata to align with FHIR or CIMI equivalents.">
            >
            ["id12"] = <
                text = <"Comment">
                description = <"Additional narrative about the food item not captured in other fields.">
            >
            ["id11"] = <
                text = <"Nutrients">
                description = <"Details about the component nutrients for this food.">
            >
            ["id10"] = <
                text = <"Glycaemic load">
                description = <"A number that estimates how much the food will raise an individual'sÂ blood glucose levelÂ after eating it.">
            >
            ["id9"] = <
                text = <"Serving">
                description = <"The number of servings of food consumed.">
                comment = <"Serving sizes should be defined in the Protocol section of this archetype.">
            >
            ["id8"] = <
                text = <"Volume">
                description = <"The volume of food consumed.">
            >
            ["id7"] = <
                text = <"Mass">
                description = <"The mass of food consumed.">
            >
            ["id6"] = <
                text = <"Amount">
                description = <"The amount of food consumed.">
            >
            ["id5"] = <
                text = <"Food item name">
                description = <"The name of the item of food being recorded.">
            >
            ["id3"] = <
                text = <"Any event">
                description = <"Default, unspecified point in time or interval event which may be explicitly defined in a template or at run-time.">
            >
            ["id1"] = <
                text = <"Food item">
                description = <"Information about a single food item consumed by an individual.">
            >
        >
    >
    term_bindings = <
        ["openehr"] = <
            ["at9000"] = <http://openehr.org/id/124>
            ["at9001"] = <http://openehr.org/id/129>
            ["at9002"] = <http://openehr.org/id/380>
        >
    >
    value_sets = <
        ["ac9004"] = <
            id = <"ac9004">
            members = <"at18", "at19">
        >
        ["ac9003"] = <
            id = <"ac9003">
            members = <"at20", "at21">
        >
    >
