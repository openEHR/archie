archetype (adl_version=2.0.5; rm_release=1.0.2; generated)
	openEHR-EHR-OBSERVATION.and.v1.0.0

language
	original_language = <[ISO_639-1::en]>

description
	original_author = <
		["name"] = <"Pieter Bos">
	>
	details = <
		["en"] = <
			language = <[ISO_639-1::en]>
			purpose = <"Test for rules, simple constant arithmetics">
			keywords = <"ADL", "test">
		>
	>
	lifecycle_state = <"published">
	other_details = <
		["regression"] = <"PASS">
	>
	copyright = <"copyright Â© 2004 openEHR Foundation <http://www.openEHR.org>">

definition
	OBSERVATION[id1] matches {	-- Body mass index
		data matches {
			HISTORY[id2] matches {
				events cardinality matches {1..*; unordered} matches {
					EVENT[id3] occurrences matches {1..*} matches {	-- Any event
						data matches {
							ITEM_TREE[id4] matches {
								items cardinality matches {1..*; unordered} matches {
									ELEMENT[id5] matches {
									    value matches {
                                            DV_TEXT[id64]
                                        }
									}
									ELEMENT[id6] matches {
                                        value matches {
                                            DV_CODED_TEXT[id54] matches {
                                                defining_code matches {[ac1]}
                                            }
										}
									}
									ELEMENT[id7] matches {
                                        value matches {
                                            DV_ORDINAL[id75] matches {
                                                [value, symbol] matches {
                                                    [{0}, {[at6]}],
                                                    [{1}, {[at7]}],
                                                    [{2}, {[at8]}]
                                                }
                                            }
                                        }
                                    }
								}
							}
						}
					}
				}
			}
		}
	}

rules
	/data[id2]/events[id3]/data[id4]/items[id5]/value/value matches {"test string"} and
	/data[id2]/events[id3]/data[id4]/items[id6]/value/defining_code matches {[at1]} and
	/data[id2]/events[id3]/data[id4]/items[id7]/value/symbol matches {[at6]}

terminology
	term_definitions = <
		["en"] = <
			["id1"] = <
                text = <"Blood Pressure">
                description = <"The local measurement of arterial blood pressure which is a surrogate for arterial. pressure in the systemic circulation.  Most commonly, use of the term 'blood pressure' refers to measurement of brachial artery pressure in the upper arm.">
            >
            ["id3"] = <
                text = <"Event">
                description = <"Event">
            >
            ["id4"] = <
                text = <"Data">
                description = <"Data">
            >
            ["id5"] = <
                text = <"element 1">
                description = <"element 1">
            >
            ["id6"] = <
                text = <"element 2">
                description = <"element 2">
            >
            ["id7"] = <
                text = <"element 3">
                description = <"element 3">
            >
			["at1"] = <
                text = <"Option 1">
                description = <"Option 1">
            >
            ["at2"] = <
                text = <"Option 2">
                description = <"Option 2">
            >
            ["at3"] = <
                text = <"Option 3">
                description = <"Option 3">
            >
            ["at5"] = <
                text = <"Option 5">
                description = <"Option 5">
            >
            ["at6"] = <
                text = <"Option 6">
                description = <"Option 6">
            >
            ["at7"] = <
                text = <"Option 7">
                description = <"Option 7">
            >
            ["ac1"] = <
                text = <"Value set 1">
                description = <"Value set 1">
            >
		>
    >
    value_sets = <
        ["ac1"] = <
            id = <"ac1">
            members = <"at1", "at2", "at3">
        >
    >

