archetype (adl_version=2.0.5; rm_release=1.0.4; generated)
    openEHR-EHR-OBSERVATION.rules_child.v0.0.1

specialize
    openEHR-EHR-OBSERVATION.rules_parent.v0

language
    original_language = <[ISO_639-1::en]>

description
    original_author = <
        ["name"] = <"Vera">
    >
    lifecycle_state = <"DRAFT">
    details = <
        ["en"] = <
            language = <[ISO-639_1::en]>
            purpose = <"Rules child archetype testing">
        >
    >

definition
    OBSERVATION[id1.1] matches {    -- RulesChild
        /data[id2]/events[id3]/data[id4]/items matches {
            after [id7]
            ELEMENT[id0.2] occurrences matches {0..1} matches {    -- Count 3
                value matches {
                    DV_COUNT[id0.3] 
                }
            }
            ELEMENT[id0.4] occurrences matches {0..1} matches {    -- Sum 2
                value matches {
                    DV_COUNT[id0.5] 
                }
            }
        }
    }

rules
    /data[id2]/events[id3]/data[id4]/items[id0.4]/value/magnitude = round(
        /data[id2]/events[id3]/data[id4]/items[id5]/value/magnitude + 
        /data[id2]/events[id3]/data[id4]/items[id0.2]/value/magnitude)


terminology
    term_definitions = <
        ["en"] = <
            ["id1.1"] = <
                text = <"RulesChild">
                description = <"Rules child archetype">
                code = <"id1">
            >
            ["id0.2"] = <
                text = <"Count 3">
                description = <"">
            >
            ["id0.4"] = <
                text = <"Sum 2">
                description = <"">
            >
        >
    >
